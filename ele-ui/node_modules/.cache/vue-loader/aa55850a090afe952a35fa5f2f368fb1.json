{"remainingRequest":"/Users/percher/personnel-management-system/ele-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/percher/personnel-management-system/ele-ui/src/components/Salary/SalaryOut.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/percher/personnel-management-system/ele-ui/src/components/Salary/SalaryOut.vue","mtime":1588841329828},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGFibGVEYXRhOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy8gaWQ6ICIiLAogICAgICAgICAgICAgICAgICAgIC8vIHVpZDogIiIsCiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZTogIiIsCiAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb246ICLmlZnmjogiLAogICAgICAgICAgICAgICAgICAgIC8vIHdhZ2VzOiA1MDAwLAogICAgICAgICAgICAgICAgICAgIC8vIGZ1bmQ6IDAuMTIsCiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdXJlMTogMC4yLAogICAgICAgICAgICAgICAgICAgIC8vIGluc3VyZTI6IDAuMSwKICAgICAgICAgICAgICAgICAgICAvLyBpbnN1cmUzOiAwLjAxLAogICAgICAgICAgICAgICAgICAgIC8vIGluc3VyZTQ6IDAuMDEsCiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdXJlNTogMC4wMDgsCiAgICAgICAgICAgICAgICAgICAgLy8gYWJzZW5jZTowCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCgogICAgICAgIH0KICAgIH0sCgogICAgY3JlYXRlZCgpIHsKICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvY2FwaXRhbC9saXN0L2ZpbmFsIikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICBfdGhpcy50YWJsZURhdGEgPSByZXNwLmRhdGEKICAgICAgICB9KQoKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY291bnREZWR1Y3Q2KHJvdykgewogICAgICAgICAgICBsZXQgciA9IHJvdy5yb3cKICAgICAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpCiAgICAgICAgICAgIGxldCBkYXkgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIDIsIDApLmdldERhdGUoKQogICAgICAgICAgICAvL+WfuuacrOW3pei1hOWHj+W6lOWQiOaJoyAg5L+d5bqV5pivMzAwMAogICAgICAgICAgICBsZXQgcmVzdWx0ID0gci53YWdlcyAtICgoZGF5IC0gci5zaWduIC0gci5hYnNlbnQpICogNTAwKSArIChyLmFic2VudCAqIDIwMCkKICAgICAgICAgICAgaWYgKHJlc3VsdCA8IDMwMDApIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IDMwMDAKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgfQogICAgICAgICwKICAgICAgICBjb3VudERlZHVjdDUocm93KSB7CiAgICAgICAgICAgIGxldCByID0gcm93LnJvdwogICAgICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgbGV0IGRheSA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgMiwgMCkuZ2V0RGF0ZSgpCgogICAgICAgICAgICByZXR1cm4gKChkYXkgLSByLnNpZ24gLSByLmFic2VudCkgKiA1MDApICsgKHIuYWJzZW50ICogMjAwKQogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgY291bnREZWR1Y3Q0KHJvdykgewogICAgICAgICAgICBsZXQgciA9IHJvdy5yb3cKICAgICAgICAgICAgbGV0IHN1bSA9IHIuaW5zdXJlMSArIHIuaW5zdXJlMiArIHIuaW5zdXJlMyArIHIuaW5zdXJlNCArIHIuaW5zdXJlNQogICAgICAgICAgICBzdW0gPSBwYXJzZUZsb2F0KHN1bSkudG9GaXhlZCgzKQogICAgICAgICAgICByZXR1cm4gKHN1bSAqIHIud2FnZXMpICsgci53YWdlcwogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgY291bnREZWR1Y3QzKHJvdykgewogICAgICAgICAgICBsZXQgciA9IHJvdy5yb3cKICAgICAgICAgICAgbGV0IHN1bSA9IHIuaW5zdXJlMSArIHIuaW5zdXJlMiArIHIuaW5zdXJlMyArIHIuaW5zdXJlNCArIHIuaW5zdXJlNQogICAgICAgICAgICBzdW0gPSBwYXJzZUZsb2F0KHN1bSkudG9GaXhlZCgzKQogICAgICAgICAgICByZXR1cm4gc3VtICogci53YWdlcwogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgY291bnREZWR1Y3QyKHJvdykgewogICAgICAgICAgICBsZXQgciA9IHJvdy5yb3cKICAgICAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpCiAgICAgICAgICAgIGxldCBkYXkgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIDIsIDApLmdldERhdGUoKQoKICAgICAgICAgICAgcmV0dXJuIChkYXkgLSByLnNpZ24gLSByLmFic2VudCkgKiA1MDAKICAgICAgICB9CiAgICAgICAgLAogICAgICAgIGNvdW50RGVkdWN0MShyb3cpIHsKICAgICAgICAgICAgbGV0IHIgPSByb3cucm93CiAgICAgICAgICAgIHJldHVybiByLmFic2VudCAqIDIwMAogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgY291bnRBYnNlbnQocm93KSB7CiAgICAgICAgICAgIGxldCByID0gcm93LnJvdwogICAgICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgbGV0IGRheSA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgMiwgMCkuZ2V0RGF0ZSgpCgogICAgICAgICAgICByZXR1cm4gKGRheSAtIHIuc2lnbiAtIHIuYWJzZW50KQogICAgICAgIH0sCgogICAgICAgIGNvdW50QW1vdW50KHJvdykgewogICAgICAgICAgICBsZXQgciA9IHJvdy5yb3cKICAgICAgICAgICAgbGV0IHN1bSA9IHIuaW5zdXJlMSArIHIuaW5zdXJlMiArIHIuaW5zdXJlMyArIHIuaW5zdXJlNCArIHIuaW5zdXJlNQogICAgICAgICAgICBzdW0gPSBwYXJzZUZsb2F0KHN1bSkudG9GaXhlZCgzKQogICAgICAgICAgICByZXR1cm4gc3VtCiAgICAgICAgfSwKCiAgICAgICAgZXhwb3J0RGF0YUV2ZW50KCkgewogICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgbGV0IG91dEZvcm1hdCA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdjc3YnLAogICAgICAgICAgICAgICAgZmlsZW5hbWU6IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgIl8iICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkgKyAiXyIgKyBkYXRlLmdldERhdGUoKS50b1N0cmluZygpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kcmVmcy54VGFibGUuZXhwb3J0RGF0YShvdXRGb3JtYXQpCiAgICAgICAgfSwKCgogICAgICAgIC8vIGV4cG9ydFNlbGVjdEV2ZW50KHJvdykgewogICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKHJvdy5yb3cpCiAgICAgICAgLy8gfQogICAgfQp9Cg=="},{"version":3,"sources":["SalaryOut.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"SalaryOut.vue","sourceRoot":"src/components/Salary","sourcesContent":["<template>\n    <div>\n        <vxe-toolbar>\n            <template v-slot:buttons>\n                <vxe-button @click=\"exportDataEvent\">生成报表</vxe-button>\n<!--                <vxe-button @click=\"exportSelectEvent\">导出选中</vxe-button>-->\n            </template>\n        </vxe-toolbar>\n\n        <vxe-table\n                highlight-hover-row\n                export-config\n                border=\"none\"\n                ref=\"xTable\"\n                height=\"460\"\n                :data=\"tableData\">\n            <vxe-table-column field=\"uid\" title=\"UID\" fixed=\"left\"></vxe-table-column>\n            <vxe-table-column field=\"name\" title=\"名字\"></vxe-table-column>\n            <vxe-table-column field=\"position\" title=\"职称\"></vxe-table-column>\n            <vxe-table-column field=\"wages\" title=\"基本工资\"></vxe-table-column>\n            <vxe-table-column field=\"fund\" title=\"公积金基数\"></vxe-table-column>\n            <vxe-table-column field=\"insure1\" title=\"养老保险基数\"></vxe-table-column>\n            <vxe-table-column field=\"insure2\" title=\"医疗保险基数\"></vxe-table-column>\n            <vxe-table-column field=\"insure3\" title=\"失业保险基数\"></vxe-table-column>\n            <vxe-table-column field=\"insure4\" title=\"工伤保险基数\"></vxe-table-column>\n            <vxe-table-column field=\"insure5\" title=\"生育保险基数\"></vxe-table-column>\n            <vxe-table-column field=\"a\" title=\"保险总基数\" :formatter=\"countAmount\"></vxe-table-column>\n            <!--            <vxe-table-column title=\"本月打卡数\" :formatter=\"countSign\"></vxe-table-column>-->\n            <vxe-table-column field=\"sign\" title=\"打卡\"></vxe-table-column>\n            <vxe-table-column field=\"absent\" title=\"请假\"></vxe-table-column>\n            <vxe-table-column field=\"b\" title=\"缺勤\" :formatter=\"countAbsent\"></vxe-table-column>\n            <vxe-table-column field=\"c\" title=\"请假应扣\" :formatter=\"countDeduct1\"></vxe-table-column>\n            <vxe-table-column field=\"d\" title=\"缺勤应扣\" :formatter=\"countDeduct2\"></vxe-table-column>\n            <vxe-table-column field=\"e\" title=\"五险一金合\" :formatter=\"countDeduct3\"></vxe-table-column>\n            <vxe-table-column field=\"f\" title=\"应发合\" :formatter=\"countDeduct4\"></vxe-table-column>\n            <vxe-table-column field=\"g\" title=\"应扣合\" :formatter=\"countDeduct5\"></vxe-table-column>\n            <vxe-table-column field=\"h\" title=\"实发\" :formatter=\"countDeduct6\"></vxe-table-column>\n        </vxe-table>\n    </div>\n</template>\n<script>\n    export default {\n        data() {\n            return {\n                tableData: [\n                    {\n                        // id: \"\",\n                        // uid: \"\",\n                        // name: \"\",\n                        // position: \"教授\",\n                        // wages: 5000,\n                        // fund: 0.12,\n                        // insure1: 0.2,\n                        // insure2: 0.1,\n                        // insure3: 0.01,\n                        // insure4: 0.01,\n                        // insure5: 0.008,\n                        // absence:0\n                    }\n                ],\n\n            }\n        },\n\n        created() {\n            let _this = this\n            axios.get(\"http://localhost:8081/capital/list/final\").then(function (resp) {\n                _this.tableData = resp.data\n            })\n\n        },\n        methods: {\n            countDeduct6(row) {\n                let r = row.row\n                let d = new Date()\n                let day = new Date(d.getFullYear(), 2, 0).getDate()\n                //基本工资减应合扣  保底是3000\n                let result = r.wages - ((day - r.sign - r.absent) * 500) + (r.absent * 200)\n                if (result < 3000) {\n                    result = 3000\n                }\n                return result\n            }\n            ,\n            countDeduct5(row) {\n                let r = row.row\n                let d = new Date()\n                let day = new Date(d.getFullYear(), 2, 0).getDate()\n\n                return ((day - r.sign - r.absent) * 500) + (r.absent * 200)\n            }\n            ,\n            countDeduct4(row) {\n                let r = row.row\n                let sum = r.insure1 + r.insure2 + r.insure3 + r.insure4 + r.insure5\n                sum = parseFloat(sum).toFixed(3)\n                return (sum * r.wages) + r.wages\n            }\n            ,\n            countDeduct3(row) {\n                let r = row.row\n                let sum = r.insure1 + r.insure2 + r.insure3 + r.insure4 + r.insure5\n                sum = parseFloat(sum).toFixed(3)\n                return sum * r.wages\n            }\n            ,\n            countDeduct2(row) {\n                let r = row.row\n                let d = new Date()\n                let day = new Date(d.getFullYear(), 2, 0).getDate()\n\n                return (day - r.sign - r.absent) * 500\n            }\n            ,\n            countDeduct1(row) {\n                let r = row.row\n                return r.absent * 200\n            }\n            ,\n            countAbsent(row) {\n                let r = row.row\n                let d = new Date()\n                let day = new Date(d.getFullYear(), 2, 0).getDate()\n\n                return (day - r.sign - r.absent)\n            },\n\n            countAmount(row) {\n                let r = row.row\n                let sum = r.insure1 + r.insure2 + r.insure3 + r.insure4 + r.insure5\n                sum = parseFloat(sum).toFixed(3)\n                return sum\n            },\n\n            exportDataEvent() {\n                let date = new Date()\n                let outFormat = {\n                    type: 'csv',\n                    filename: date.getFullYear().toString() + \"_\" + (date.getMonth() + 1).toString() + \"_\" + date.getDate().toString()\n                }\n                this.$refs.xTable.exportData(outFormat)\n            },\n\n\n            // exportSelectEvent(row) {\n            //     //console.log(row.row)\n            // }\n        }\n    }\n</script>"]}]}