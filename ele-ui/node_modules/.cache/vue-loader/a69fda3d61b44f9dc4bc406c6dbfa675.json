{"remainingRequest":"/Users/percher/WebstormProjects/ele-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/percher/WebstormProjects/ele-ui/src/components/User/UserEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/percher/WebstormProjects/ele-ui/src/components/User/UserEdit.vue","mtime":1583951020179},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGluamVjdDogWydyZWxvYWQnXQogICAgLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYWdlU2l6ZTogMCwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIHRhYmxlRGF0YTogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgICAgICBwaG9uZTogJycsCiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgICAgICAgICAgIGRlcGFydDogJycsCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLAogICAgICAgICAgICAgICAgICAgIGdlbmRlcjogJycsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHNleExpc3Q6IFsKICAgICAgICAgICAgICAgIHtsYWJlbDogJ+WlsycsIHZhbHVlOiAn5aWzJ30sCiAgICAgICAgICAgICAgICB7bGFiZWw6ICfnlLcnLCB2YWx1ZTogJ+eUtyd9CiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9LAoKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvdXNlci9maW5kQWxsLzEvOSIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzcC5kYXRhLnJlY29yZHMKICAgICAgICAgICAgX3RoaXMucGFnZVNpemUgPSByZXNwLmRhdGEuc2l6ZQogICAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3AuZGF0YS50b3RhbAogICAgICAgIH0pCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICAvL+WIhumhteaWueazlSzngrnlh7vlkI7op6blj5Hkuovku7YKICAgICAgICBwYWdlQ2hhbmdlKGN1cnJlbnRQYWdlKSB7CiAgICAgICAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS91c2VyL2ZpbmRBbGwvJyArIGN1cnJlbnRQYWdlLnRvU3RyaW5nKCkgKyAiLzkiKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICBfdGhpcy50YWJsZURhdGEgPSByZXNwLmRhdGEucmVjb3JkcwogICAgICAgICAgICAgICAgX3RoaXMucGFnZVNpemUgPSByZXNwLmRhdGEuc2l6ZQogICAgICAgICAgICAgICAgX3RoaXMudG90YWwgPSByZXNwLmRhdGEudG90YWwKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICAvL+inpuWPkee8lui+keS6i+S7tgogICAgICAgIGVkaXRSb3dFdmVudChyb3cpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy54VGFibGUuc2V0QWN0aXZlUm93KHJvdykKICAgICAgICB9LAoKICAgICAgICAvL+WIoOmZpOS6i+S7tgogICAgICAgIGRlbGVSb3dFdmVudChyb3cpIHsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi5Yig6ZmkIiArIHJvdy5pZCkKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICB0aGlzLiRYTW9kYWwuY29uZmlybSgn5oKo56Gu5a6a6KaB5Yig6Zmk6K+l5pWw5o2uPycpLnRoZW4odHlwZSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy54VGFibGUucmVtb3ZlKHJvdykKICAgICAgICAgICAgICAgICAgICAvL+WQkeacjeWKoeWZqOivt+axguWIoOmZpAogICAgICAgICAgICAgICAgICAgIGF4aW9zLmRlbGV0ZSgiaHR0cDovL2xvY2FsaG9zdDo4MDgxL3VzZXIvZGVsZXRlVXNlci8iICsgcm93LmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWxvYWQoKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoJ+WIoOmZpOWksei0pSzmlbDmja7kuI3lrZjlnKgnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgLy/kv67mlLnlkI7kv53lrZjkuovku7YKICAgICAgICBzYXZlUm93RXZlbnQocm93KSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgdGhpcy4kcmVmcy54VGFibGUuY2xlYXJBY3RpdmVkKCkudGhlbigoKSA9PiB7CgogICAgICAgICAgICAgICAgLy/mj5DkuqTliLDmlbDmja7lupMs6Ieq5Yqo5bCB6KOF5oiQSnNvbgogICAgICAgICAgICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvdXNlci8vdXBkYXRlVXNlciIsIHJvdykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoJ+S/ruaUueaIkOWKnycpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfkv67mlLnlpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICAvL+WPlua2iOS/ruaUueWQjui/mOWOn+ihqOaVsOaNrgogICAgICAgIGNhbmNlbFJvd0V2ZW50KHJvdykgewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgIHRoaXMuJHJlZnMueFRhYmxlLmNsZWFyQWN0aXZlZCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgLy8g6L+Y5Y6f6KGM5pWw5o2uIOimgeW8gOWQr2tlZXAtc291cmNlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5Y+W5raI5LqG5pu05pS5IikKICAgICAgICAgICAgICAgIF90aGlzLiRyZWZzLnhUYWJsZS5yZXZlcnREYXRhKHJvdykKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["UserEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserEdit.vue","sourceRoot":"src/components/User","sourcesContent":["<template>\n    <div>\n        <vxe-table\n                ref=\"xTable\"\n                :keep-source=\"true\"\n                border\n                resizable\n                show-overflow\n                :data=\"tableData\"\n                :edit-config=\"{trigger: 'manual', mode: 'row'}\">\n            <vxe-table-column field=\"id\" title=\"编号\" width=\"60\"></vxe-table-column>\n            <vxe-table-column field=\"name\" title=\"姓名\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"gender\" title=\"性别\"\n                              :edit-render=\"{name: '$select', options: sexList}\"></vxe-table-column>\n            <vxe-table-column field=\"phone\" title=\"电话\"\n                              :edit-render=\"{name: '$input', props: {type: 'number'}}\"></vxe-table-column>\n            <vxe-table-column field=\"email\" title=\"邮箱\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"depart\" title=\"部门\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"position\" title=\"职位\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"address\" title=\"地址\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n\n            <vxe-table-column title=\"操作\">\n                <template v-slot=\"{ row }\">\n                    <template v-if=\"$refs.xTable.isActiveByRow(row)\">\n                        <vxe-button @click=\"saveRowEvent(row)\" size=\"small\">保存</vxe-button>\n                        <vxe-button @click=\"cancelRowEvent(row)\" size=\"small\">取消</vxe-button>\n                    </template>\n                    <template v-else>\n\n                        <el-button @click=\"editRowEvent(row)\" type=\"primary\" icon=\"el-icon-edit\" circle\n                                   size=\"small\"></el-button>\n                        <el-button @click=\"deleRowEvent(row)\" type=\"danger\" size=\"small\" icon=\"el-icon-delete\"\n                                   circle></el-button>\n                    </template>\n                </template>\n            </vxe-table-column>\n        </vxe-table>\n\n        <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                :page-size=\"pageSize\"\n                :total=\"total\"\n                @current-change=\"pageChange\"\n        >\n        </el-pagination>\n    </div>\n</template>\n\n<script>\n    export default {\n        inject: ['reload']\n        ,\n        data() {\n            return {\n                pageSize: 0,\n                total: 0,\n                tableData: [\n                    {\n                        id: '',\n                        name: '',\n                        phone: '',\n                        email: '',\n                        address: '',\n                        depart: '',\n                        position: '',\n                        gender: '',\n                    }\n                ],\n                sexList: [\n                    {label: '女', value: '女'},\n                    {label: '男', value: '男'}\n                ]\n            }\n        },\n\n        created() {\n            const _this = this\n            axios.get(\"http://localhost:8081/user/findAll/1/9\").then(function (resp) {\n                _this.tableData = resp.data.records\n                _this.pageSize = resp.data.size\n                _this.total = resp.data.total\n            })\n        },\n\n        methods: {\n            //分页方法,点击后触发事件\n            pageChange(currentPage) {\n                const _this = this\n                axios.get('http://localhost:8081/user/findAll/' + currentPage.toString() + \"/9\").then(function (resp) {\n                    _this.tableData = resp.data.records\n                    _this.pageSize = resp.data.size\n                    _this.total = resp.data.total\n                })\n            },\n\n            //触发编辑事件\n            editRowEvent(row) {\n                this.$refs.xTable.setActiveRow(row)\n            },\n\n            //删除事件\n            deleRowEvent(row) {\n                //console.log(\"删除\" + row.id)\n                let _this = this\n                this.$XModal.confirm('您确定要删除该数据?').then(type => {\n                    if (type === 'confirm') {\n                        this.$refs.xTable.remove(row)\n                        //向服务器请求删除\n                        axios.delete(\"http://localhost:8081/user/deleteUser/\" + row.id).then(function (resp) {\n                            if (resp.data) {\n                                _this.$message('删除成功');\n                                //window.location.reload()\n                                _this.reload()\n                            } else {\n                                _this.$message('删除失败,数据不存在');\n                            }\n                        })\n                    } else {\n                        _this.$message({\n                            type: 'info',\n                            message: '已取消删除'\n                        })\n                    }\n                })\n            },\n\n            //修改后保存事件\n            saveRowEvent(row) {\n                let _this = this\n                this.$refs.xTable.clearActived().then(() => {\n\n                    //提交到数据库,自动封装成Json\n                    axios.put(\"http://localhost:8081/user//updateUser\", row).then(function (resp) {\n                        if (resp.data) {\n                            _this.$message('修改成功');\n                        } else {\n                            _this.$message('修改失败');\n                        }\n                    })\n\n                })\n            },\n\n            //取消修改后还原表数据\n            cancelRowEvent(row) {\n                let _this = this\n                this.$refs.xTable.clearActived().then(() => {\n                    // 还原行数据 要开启keep-source\n                    console.log(\"取消了更改\")\n                    _this.$refs.xTable.revertData(row)\n                })\n            }\n        }\n    }\n</script>"]}]}