{"remainingRequest":"/Users/percher/WebstormProjects/ele-ui/node_modules/babel-loader/lib/index.js!/Users/percher/WebstormProjects/ele-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/percher/WebstormProjects/ele-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/percher/WebstormProjects/ele-ui/src/components/Author/Control.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/percher/WebstormProjects/ele-ui/src/components/Author/Control.vue","mtime":1583951856896},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/WebstormProjects/ele-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGhpc191aWQ6IDAsCiAgICAgIHRhYmxlRGF0YTogW3sKICAgICAgICB1aWQ6IDIzLAogICAgICAgIGR1dHk6ICflkZjlt6UnLAogICAgICAgIGF1dGhvcjogdHJ1ZSwKICAgICAgICBuYW1lOiAn546L5bCP6JmOJwogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVzZXJUeXBlOiBmdW5jdGlvbiB1c2VyVHlwZShyb3cpIHsKICAgICAgcmV0dXJuIHJvdy5kdXR5ID0gcm93LmF1dGhvciA/ICfnrqHnkIblkZgnIDogJ+WRmOW3pSc7CiAgICB9LAogICAgY2hhbmdlRXZlbnQ6IGZ1bmN0aW9uIGNoYW5nZUV2ZW50KHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHJvdy5hdXRob3IpIHsKICAgICAgICByb3cuZHV0eSA9ICLnrqHnkIblkZgiOyAvL2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9sb2dpbi9lZGl0Um9sZS97dWlkfS8xCiAgICAgICAgLy/lkJHmnI3liqHlmajor7fmsYJyb3cuaWTlj5jkuLrnrqHnkIblkZgKCiAgICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvbG9naW4vZWRpdFJvbGUvIiArIHJvdy51aWQgKyAiLzEiKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcC5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3Mocm93Lm5hbWUgKyAi5bey5oiQ5Li6566h55CG5ZGYIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByb3cuZHV0eSA9ICLlkZjlt6UiOyAvL2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9sb2dpbi9lZGl0Um9sZS97dWlkfS8yCiAgICAgICAgLy/lkJHmnI3liqHlmajmkqTplIByb3cuaWTnmoTnrqHnkIblkZjotYTmoLwKCiAgICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvbG9naW4vZWRpdFJvbGUvIiArIHJvdy51aWQgKyAiLzIiKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcC5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmluZm8ocm93Lm5hbWUgKyAi5bey6ZmN57qn5Li65ZGY5belIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy50aGlzX3VpZCA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlckluZm8iKSkudWlkOwogICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvbG9naW4vZ2V0Um9sZSIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzcC5kYXRhOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["Control.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AAEA,MAAA,QAAA,EAAA,CAFA;AAIA,MAAA,SAAA,EAAA,CACA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,IAHA;AAIA,QAAA,IAAA,EAAA;AAJA,OADA;AAJA,KAAA;AAaA,GAfA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AACA,aAAA,GAAA,CAAA,IAAA,GAAA,GAAA,CAAA,MAAA,GAAA,KAAA,GAAA,IAAA;AACA,KAHA;AAKA,IAAA,WALA,uBAKA,GALA,EAKA;AACA,UAAA,KAAA,GAAA,IAAA;;AAEA,UAAA,GAAA,CAAA,MAAA,EAAA;AACA,QAAA,GAAA,CAAA,IAAA,GAAA,KAAA,CADA,CAEA;AACA;;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,0CAAA,GAAA,CAAA,GAAA,GAAA,IAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,GAAA,QAAA;AACA,WAFA,MAEA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA;AACA,SANA;AAOA,OAXA,MAWA;AAEA,QAAA,GAAA,CAAA,IAAA,GAAA,IAAA,CAFA,CAGA;AACA;;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,0CAAA,GAAA,CAAA,GAAA,GAAA,IAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,GAAA,QAAA;AACA,WAFA,MAEA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA;AACA,SANA;AAOA;AACA;AAhCA,GAjBA;AAmDA,EAAA,OAnDA,qBAmDA;AACA,QAAA,KAAA,GAAA,IAAA;;AACA,SAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA,GAAA;AACA,IAAA,KAAA,CAAA,GAAA,CAAA,qCAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA;AACA,KAFA;AAGA;AAzDA,CAAA","sourcesContent":["<template>\n    <div>\n\n        <el-table style=\"width: 100%\"\n                  height=\"510\"\n                  :data=\"tableData\">\n            <el-table-column label=\"ID\" prop=\"uid\"></el-table-column>\n            <el-table-column label=\"姓名\" prop=\"name\"></el-table-column>\n            <el-table-column label=\"身份\" prop=\"duty\" :formatter=\"userType\"></el-table-column>\n            <el-table-column label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-switch :disabled=\"this_uid===scope.row.uid\" v-model=\"scope.row.author\"\n                               @change=\"changeEvent(scope.row)\"></el-switch>\n                </template>\n            </el-table-column>\n\n        </el-table>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n\n                this_uid: 0,\n\n                tableData: [\n                    {\n                        uid: 23,\n                        duty: '员工',\n                        author: true,\n                        name: '王小虎',\n                    },\n                ]\n            }\n        },\n\n        methods: {\n            userType(row) {\n                return row.duty = row.author ? '管理员' : '员工'\n            }\n            ,\n            changeEvent(row) {\n                let _this = this\n\n                if (row.author) {\n                    row.duty = \"管理员\"\n                    //http://localhost:8081/login/editRole/{uid}/1\n                    //向服务器请求row.id变为管理员\n                    axios.put(\"http://localhost:8081/login/editRole/\" + row.uid + \"/1\").then(function (resp) {\n                        if (resp.data) {\n                            _this.$message.success(row.name + \"已成为管理员\")\n                        }else {\n                            console.log(\"error\")\n                        }\n                    })\n                } else {\n\n                    row.duty = \"员工\"\n                    //http://localhost:8081/login/editRole/{uid}/2\n                    //向服务器撤销row.id的管理员资格\n                    axios.put(\"http://localhost:8081/login/editRole/\" + row.uid + \"/2\").then(function (resp) {\n                        if (resp.data) {\n                            _this.$message.info(row.name + \"已降级为员工\")\n                        }else {\n                            console.log(\"error\")\n                        }\n                    })\n                }\n            }\n        },\n        created() {\n            let _this = this\n            this.this_uid = JSON.parse(sessionStorage.getItem(\"userInfo\")).uid\n            axios.get(\"http://localhost:8081/login/getRole\").then(function (resp) {\n                _this.tableData = resp.data\n            })\n        }\n    }\n</script>"],"sourceRoot":"src/components/Author"}]}