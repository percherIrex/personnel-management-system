{"remainingRequest":"/Users/percher/personnel-management-system/ele-ui/node_modules/babel-loader/lib/index.js!/Users/percher/personnel-management-system/ele-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/percher/personnel-management-system/ele-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/percher/personnel-management-system/ele-ui/src/components/User/UserEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/percher/personnel-management-system/ele-ui/src/components/User/UserEdit.vue","mtime":1589651452273},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/percher/personnel-management-system/ele-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWydyZWxvYWQnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZVNpemU6IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICB0YWJsZURhdGE6IFt7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgYWRkcmVzczogJycsCiAgICAgICAgZGVwYXJ0OiAnJywKICAgICAgICBwb3NpdGlvbjogJycsCiAgICAgICAgZ2VuZGVyOiAnJwogICAgICB9XSwKICAgICAgc2V4TGlzdDogW3sKICAgICAgICBsYWJlbDogJ+WlsycsCiAgICAgICAgdmFsdWU6ICflpbMnCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+eUtycsCiAgICAgICAgdmFsdWU6ICfnlLcnCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvdXNlci9maW5kQWxsLzEvOSIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzcC5kYXRhLnJlY29yZHM7CiAgICAgIF90aGlzLnBhZ2VTaXplID0gcmVzcC5kYXRhLnNpemU7CiAgICAgIF90aGlzLnRvdGFsID0gcmVzcC5kYXRhLnRvdGFsOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WIhumhteaWueazlSzngrnlh7vlkI7op6blj5Hkuovku7YKICAgIHBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIHBhZ2VDaGFuZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDgxL3VzZXIvZmluZEFsbC8nICsgY3VycmVudFBhZ2UudG9TdHJpbmcoKSArICIvOSIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpcy50YWJsZURhdGEgPSByZXNwLmRhdGEucmVjb3JkczsKICAgICAgICBfdGhpcy5wYWdlU2l6ZSA9IHJlc3AuZGF0YS5zaXplOwogICAgICAgIF90aGlzLnRvdGFsID0gcmVzcC5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCiAgICAvL+inpuWPkee8lui+keS6i+S7tgogICAgZWRpdFJvd0V2ZW50OiBmdW5jdGlvbiBlZGl0Um93RXZlbnQocm93KSB7CiAgICAgIHRoaXMuJHJlZnMueFRhYmxlLnNldEFjdGl2ZVJvdyhyb3cpOwogICAgfSwKICAgIC8v5Yig6Zmk5LqL5Lu2CiAgICBkZWxlUm93RXZlbnQ6IGZ1bmN0aW9uIGRlbGVSb3dFdmVudChyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvL2NvbnNvbGUubG9nKCLliKDpmaQiICsgcm93LmlkKQogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG15ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsKICAgICAgdGhpcy4kWE1vZGFsLmNvbmZpcm0oJ+aCqOehruWumuimgeWIoOmZpOivpeaVsOaNrj8nKS50aGVuKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT09ICdjb25maXJtJykgewogICAgICAgICAgX3RoaXMyLiRyZWZzLnhUYWJsZS5yZW1vdmUocm93KTsgLy/lkJHmnI3liqHlmajor7fmsYLliKDpmaQKCgogICAgICAgICAgYXhpb3MuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjgwODEvdXNlci9kZWxldGVVc2VyLyIgKyByb3cuaWQgKyAiLyIgKyByb3cubmFtZSArICIvIiArIG15LnVpZCArICIvIiArIG15Lm5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgaWYgKHJlc3AuZGF0YSkgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfliKDpmaTmiJDlip8nKTsgLy93aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKCgogICAgICAgICAgICAgIF90aGlzLnJlbG9hZCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfliKDpmaTlpLHotKUs5pWw5o2u5LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/kv67mlLnlkI7kv53lrZjkuovku7YKICAgIHNhdmVSb3dFdmVudDogZnVuY3Rpb24gc2F2ZVJvd0V2ZW50KHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG15ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpKTsKICAgICAgdGhpcy4kcmVmcy54VGFibGUuY2xlYXJBY3RpdmVkKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/mj5DkuqTliLDmlbDmja7lupMs6Ieq5Yqo5bCB6KOF5oiQSnNvbgogICAgICAgIGF4aW9zLnB1dCgiaHR0cDovL2xvY2FsaG9zdDo4MDgxL3VzZXIvdXBkYXRlVXNlci8iICsgbXkudWlkICsgIi8iICsgbXkubmFtZSwgcm93KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcC5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfkv67mlLnmiJDlip8nKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKCfkv67mlLnlpLHotKUnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lj5bmtojkv67mlLnlkI7ov5jljp/ooajmlbDmja4KICAgIGNhbmNlbFJvd0V2ZW50OiBmdW5jdGlvbiBjYW5jZWxSb3dFdmVudChyb3cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMueFRhYmxlLmNsZWFyQWN0aXZlZCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOi/mOWOn+ihjOaVsOaNriDopoHlvIDlkK9rZWVwLXNvdXJjZQogICAgICAgIGNvbnNvbGUubG9nKCLlj5bmtojkuobmm7TmlLkiKTsKCiAgICAgICAgX3RoaXMuJHJlZnMueFRhYmxlLnJldmVydERhdGEocm93KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["UserEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <vxe-table\n                ref=\"xTable\"\n                :keep-source=\"true\"\n                border\n                resizable\n                show-overflow\n                :data=\"tableData\"\n                :edit-config=\"{trigger: 'manual', mode: 'row'}\">\n            <vxe-table-column field=\"id\" title=\"编号\" width=\"60\"></vxe-table-column>\n            <vxe-table-column field=\"name\" title=\"姓名\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"gender\" title=\"性别\"\n                              :edit-render=\"{name: '$select', options: sexList}\"></vxe-table-column>\n            <vxe-table-column field=\"phone\" title=\"电话\"\n                              :edit-render=\"{name: '$input', props: {type: 'number'}}\"></vxe-table-column>\n            <vxe-table-column field=\"email\" title=\"邮箱\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"depart\" title=\"部门\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"position\" title=\"职位\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n            <vxe-table-column field=\"address\" title=\"地址\"\n                              :edit-render=\"{name: 'input', attrs: {type: 'text'}}\"></vxe-table-column>\n\n            <vxe-table-column title=\"操作\">\n                <template v-slot=\"{ row }\">\n                    <template v-if=\"$refs.xTable.isActiveByRow(row)\">\n                        <vxe-button @click=\"saveRowEvent(row)\" size=\"mini\">保存</vxe-button>\n                        <vxe-button @click=\"cancelRowEvent(row)\" size=\"mini\">取消</vxe-button>\n                    </template>\n                    <template v-else>\n\n                        <el-button @click=\"editRowEvent(row)\" type=\"primary\" icon=\"el-icon-edit\" circle\n                                   size=\"small\"></el-button>\n                        <el-button @click=\"deleRowEvent(row)\" type=\"danger\" size=\"small\" icon=\"el-icon-delete\"\n                                   circle></el-button>\n                    </template>\n                </template>\n            </vxe-table-column>\n        </vxe-table>\n\n        <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                :page-size=\"pageSize\"\n                :total=\"total\"\n                @current-change=\"pageChange\"\n        >\n        </el-pagination>\n    </div>\n</template>\n\n<script>\n    export default {\n        inject: ['reload']\n        ,\n        data() {\n            return {\n                pageSize: 0,\n                total: 0,\n                tableData: [\n                    {\n                        id: '',\n                        name: '',\n                        phone: '',\n                        email: '',\n                        address: '',\n                        depart: '',\n                        position: '',\n                        gender: '',\n                    }\n                ],\n                sexList: [\n                    {label: '女', value: '女'},\n                    {label: '男', value: '男'}\n                ]\n            }\n        },\n\n        created() {\n            const _this = this\n            axios.get(\"http://localhost:8081/user/findAll/1/9\").then(function (resp) {\n                _this.tableData = resp.data.records\n                _this.pageSize = resp.data.size\n                _this.total = resp.data.total\n            })\n        },\n\n        methods: {\n            //分页方法,点击后触发事件\n            pageChange(currentPage) {\n                const _this = this\n                axios.get('http://localhost:8081/user/findAll/' + currentPage.toString() + \"/9\").then(function (resp) {\n                    _this.tableData = resp.data.records\n                    _this.pageSize = resp.data.size\n                    _this.total = resp.data.total\n                })\n            },\n\n            //触发编辑事件\n            editRowEvent(row) {\n                this.$refs.xTable.setActiveRow(row)\n            },\n\n            //删除事件\n            deleRowEvent(row) {\n                //console.log(\"删除\" + row.id)\n                let _this = this\n                let my = JSON.parse(sessionStorage.getItem(\"userInfo\"))\n                this.$XModal.confirm('您确定要删除该数据?').then(type => {\n                    if (type === 'confirm') {\n                        this.$refs.xTable.remove(row)\n                        //向服务器请求删除\n                        axios.delete(\"http://localhost:8081/user/deleteUser/\" +\n                            row.id+\"/\"+row.name+\"/\"+my.uid+\"/\"+my.name)\n                            .then(function (resp) {\n                            if (resp.data) {\n                                _this.$message('删除成功');\n                                //window.location.reload()\n                                _this.reload()\n                            } else {\n                                _this.$message('删除失败,数据不存在');\n                            }\n                        })\n                    } else {\n                        _this.$message({\n                            type: 'info',\n                            message: '已取消删除'\n                        })\n                    }\n                })\n            },\n\n            //修改后保存事件\n            saveRowEvent(row) {\n                let _this = this\n                let my = JSON.parse(sessionStorage.getItem(\"userInfo\"))\n\n                this.$refs.xTable.clearActived().then(() => {\n\n                    //提交到数据库,自动封装成Json\n                    axios.put(\"http://localhost:8081/user/updateUser/\"+my.uid+\"/\"+my.name, row).then(function (resp) {\n                        if (resp.data) {\n                            _this.$message('修改成功');\n                        } else {\n                            _this.$message('修改失败');\n                        }\n                    })\n\n                })\n            },\n\n            //取消修改后还原表数据\n            cancelRowEvent(row) {\n                let _this = this\n                this.$refs.xTable.clearActived().then(() => {\n                    // 还原行数据 要开启keep-source\n                    console.log(\"取消了更改\")\n                    _this.$refs.xTable.revertData(row)\n                })\n            }\n        }\n    }\n</script>"],"sourceRoot":"src/components/User"}]}