"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _default2={name:"VxeTextarea",props:{value:[String,Number],name:String,readonly:Boolean,disabled:Boolean,placeholder:String,maxlength:[String,Number],rows:{type:[String,Number],default:2},showWordCount:Boolean,autosize:[Boolean,Object],form:String,resize:{type:String,default:function(){return _conf.default.textarea.resize}},size:String},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},inputCount:function(){return _xeUtils.default.getSize(this.value)},isCountError:function(){return this.maxlength&&this.inputCount>_xeUtils.default.toNumber(this.maxlength)},sizeValue:function(){return(""+(this.value||"　")).replace(/\n$/,"\n　")},defaultEvents:function(){var i=this,n={};return _xeUtils.default.each(this.$listeners,function(e,t){-1===["change"].indexOf(t)&&(n[t]=i.triggerEvent)}),n.input=this.inputEvent,n},sizeOpts:function(){return Object.assign({minRows:1,maxRows:10},_conf.default.textarea.autosize,this.autosize)}},created:function(){this.handleResize()},render:function(e){var t,i=this.defaultEvents,n=this.value,r=this.vSize,s=this.name,a=this.form,o=this.resize,u=this.placeholder,l=this.readonly,d=this.disabled,h=this.maxlength,f=this.autosize,c=this.showWordCount,p={name:s,form:a,placeholder:u,maxlength:h,readonly:l,disabled:d};return u&&(p.placeholder=_tools.UtilTools.getFuncText(u)),e("div",{class:["vxe-textarea",(_defineProperty(t={},"size--".concat(r),r),_defineProperty(t,"is--autosize",f),_defineProperty(t,"is--disabled",d),t)]},[e("textarea",{ref:"textarea",class:"vxe-textarea--inner",domProps:{value:n},attrs:p,style:o?{resize:o}:null,on:i}),f?e("span",{ref:"size",class:"vxe-textarea--autosize"},this.sizeValue):null,c?e("span",{class:["vxe-textarea--count",{"is--error":this.isCountError}]},"".concat(this.inputCount).concat(h?"/".concat(h):"")):null])},methods:{focus:function(){return this.$refs.textarea.focus(),this.$nextTick()},blur:function(){return this.$refs.textarea.blur(),this.$nextTick()},emitUpdate:function(e){this.$emit("input",e),this.value!==e&&this.$emit("change",{value:e})},inputEvent:function(e){this.emitUpdate(e.target.value),this.handleResize()},handleResize:function(){var h=this;this.autosize&&this.$nextTick(function(){var e=h.$refs,t=h.sizeOpts,i=t.minRows,n=t.maxRows,r=e.textarea,s=e.size.clientHeight,a=getComputedStyle(r),o=_xeUtils.default.toNumber(a.lineHeight),u=_xeUtils.default.toNumber(a.paddingTop)+_xeUtils.default.toNumber(a.paddingBottom)+_xeUtils.default.toNumber(a.borderTopWidth)+_xeUtils.default.toNumber(a.borderBottomWidth),l=Math.floor((s-u)/o)+1,d=l;l<i?d=i:n<l&&(d=n),r.style.height="".concat(d*o+u,"px")})}}};exports.default=_default2;