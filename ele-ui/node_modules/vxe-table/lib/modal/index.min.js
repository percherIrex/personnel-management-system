"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Modal=Modal,exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_modal=_interopRequireDefault(require("./src/modal")),_queue=_interopRequireDefault(require("./src/queue")),_vXETable=_interopRequireDefault(require("../v-x-e-table")),_tools=require("../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var AlertController=null,allActivedModals=[];function openModal(a){return new Promise(function(o){if(a&&a.id&&_queue.default.some(function(e){return e.id===a.id}))o("exist");else{var l=a.events||{};a.events=Object.assign({},l,{hide:function(e){l.hide&&l.hide.call(this,e),setTimeout(function(){return t.$destroy()},t.isMsg?500:100),_xeUtils.default.remove(allActivedModals,function(e){return e===t}),o(e.type)}});var t=new AlertController({el:document.createElement("div"),propsData:a});setTimeout(function(){return t.open()}),allActivedModals.push(t)}})}function Modal(e){return openModal(e)}function closeModal(e){if(arguments.length){var o=getModal(e);o&&o.close("close")}else allActivedModals.forEach(function(e){return e.close("close")})}function getModal(o){return allActivedModals.find(function(e){return e.id===o})}["alert","confirm","message"].forEach(function(a,e){var r=2===e?{mask:!1,lockView:!1,showHeader:!1}:{showFooter:!0};r.type=a,r.dblclickZoom=!1,1===e&&(r.status="question"),Modal[a]=function(e,o,l){var t;return _xeUtils.default.isObject(e)?t=e:o&&(t={title:o}),openModal(Object.assign({message:_xeUtils.default.toString(e),type:a},r,t,l))}}),Modal.closeAll=function(){_tools.UtilTools.warn("vxe.error.delFunc",["closeAll","close"]),closeModal()},Modal.get=getModal,Modal.close=closeModal,Modal.open=openModal,Modal.install=function(e){_vXETable.default._modal=1,e.component("vxe-message",_modal.default),e.component(_modal.default.name,_modal.default),AlertController=e.extend(_modal.default),e.prototype.$XMsg=Modal,e.prototype.$XModal=Modal,_vXETable.default.$modal=Modal};var _default=Modal;exports.default=_default;